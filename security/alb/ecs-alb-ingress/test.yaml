title: "ALB security group swap"
description: |
  Verify application security configuration.
  Swapping ALB (Application Load Balancer) security groups with a dummy group
  with wide open access policies should stop requests from reaching the target
  application.

method: []

steady-state-hypothesis:
  title: "Ningx web server is available"
  probes:
    - type: probe
      name: "should-have-no-successful-requests"
      tolerance: 0
      provider:
        type: python
        module: chaosaws.cloudwatch.probes
        func: get_metric_statistics
        arguments:
          namespace: "AWS/ApplicationELB"
          metric_name: HTTPCode_Target_2XX_Count
          dimensions:
            - Name: "LoadBalancer"
              Value: "app/chaos-Appli-WII0SYITLS8C/8a84528e867aa64b"
          statistic: "Sum"
          duration: 120

          #SEARCH('{AWS/ApplicationELB,AvailabilityZone,LoadBalancer} MetricName=HTTPCode_Target_2XX_Count', 'Average', 5)
