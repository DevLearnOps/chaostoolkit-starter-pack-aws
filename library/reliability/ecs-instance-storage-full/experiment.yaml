title: DevLearnOps Sample Experiment
description: |-
  describe me

contributions:
  security: "none"
  reliability: "none"
  scalability: "none"

configuration:
  application_url: "http://www.google.com"

steady-state-hypothesis:
  title: "My Hypothesis"
  probes:
    - type: probe
      name: "site-responsive"
      tolerance: 200
      provider:
        type: http
        url: ${application_url}

method:
  - name: "dummy-method-action"
    type: action
    provider:
      type: process
      path: ls
      arguments: "-la"

  - name: "run-command"
    type: action
    provider:
      type: python
      module: devlearnops.aws.ssm.actions
      func: send_command
      arguments:
        document_name: "AWS-RunShellScript"
        document_version: "$DEFAULT"
        targets:
          - Key: "tag:Application"
            Values:
              - "comments"
        targets_percent: 50
        parameters:
          commands:
            - 'echo "this is me" > /opt/test1'
            - 'echo "another-line" > /opt/test2'
        timeout_seconds: 30
        max_concurrency: "1"
        max_errors: "0"

  - name: "disk-fill"
    type: action
    provider:
      type: python
      module: devlearnops.aws.ssm.actions
      func: send_command
      arguments:
        document_name: "AWSFIS-Run-Disk-Fill"
        document_version: "$DEFAULT"
        targets:
          - Key: "tag:Application"
            Values:
              - "comments"
        targets_percent: 50
        parameters:
          DurationSeconds:
            - "60"
          Percent:
            - "95"
          InstallDependencies:
            - "True"
        timeout_seconds: 120
        max_concurrency: "1"
        max_errors: "0"

rollbacks:
  - name: "dummy-rollback-action"
    type: action
    provider:
      type: process
      path: ls
      arguments: "-la"
